(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[426],{5273:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/boards",function(){return s(6656)}])},5344:function(e,t,s){"use strict";s.d(t,{Z:function(){return Spinner}});var r=s(5893),i=s(5675),l=s.n(i),a={src:"/_next/static/media/spinner.13278b32.svg",height:48,width:48,blurWidth:0,blurHeight:0},c=s(656),n=s.n(c);function Spinner(e){let{className:t=""}=e;return(0,r.jsx)(l(),{className:"".concat(n().spinner," ").concat(t),src:a,width:45,height:45,alt:"로딩 중...."})}},6656:function(e,t,s){"use strict";s.r(t),s.d(t,{__N_SSP:function(){return k},default:function(){return Boards}});var r=s(5893),i=s(7294),l=s(7066);let a=l.Z.create({baseURL:"https://panda-market-api.vercel.app"}),fetchBestArticles=async e=>{try{let t=await a.get("/articles",{params:{page:1,pageSize:e,orderBy:"like"}});return t.data.results||t.data.list||[]}catch(e){throw console.error("Failed to fetch best articles",e),e}},fetchAllArticles=async(e,t)=>{try{let s=await a.get("/articles",{params:{orderBy:e,keyword:t}});return s.data.results||s.data.list||[]}catch(e){throw console.error("Failed to fetch all articles",e),e}};var c=s(5675),n=s.n(c),o=s(5588),d=s.n(o),_=s(1450),h=s.n(_);function LikeButton(e){let{article:t}=e;return(0,r.jsxs)("div",{className:h().likeButton,children:[(0,r.jsx)(n(),{src:"/ic_heart.png",width:24,height:24,alt:"좋아요 아이콘"}),(0,r.jsxs)("div",{className:h().likeCount,children:[t.likeCount,"+"]})]})}var u=s(4636),m=s.n(u),components_Dropdown=e=>{var t;let{options:s,selectedValue:l,onSelect:a}=e,[c,o]=(0,i.useState)(!1),handleSelect=e=>{a(e),o(!1)};return(0,r.jsxs)("div",{className:m().dropdownBox,children:[(0,r.jsxs)("div",{className:m().dropdownToggle,onClick:()=>{o(e=>!e)},children:[(0,r.jsx)("div",{className:m().optionText,children:null===(t=s.find(e=>e.value===l))||void 0===t?void 0:t.label}),(0,r.jsx)(n(),{className:m().arrowImage,src:"/ic_arrow_down.png",alt:"드롭다운 아이콘",width:24,height:24}),(0,r.jsx)(n(),{className:m().sortImage,src:"/ic_sort.png",alt:"드롭다운 아이콘",width:24,height:24})]}),c&&(0,r.jsx)("ul",{className:m().dropdownMenu,children:s.map(e=>(0,r.jsx)("li",{onClick:()=>handleSelect(e.value),children:e.label},e.value))})]})},A=s(5641),g=s.n(A),p=s(1163);function SearchForm(e){let{initialValue:t="",onSearch:s}=e,[l,a]=(0,i.useState)(t),c=(0,p.useRouter)();return(0,r.jsxs)("form",{className:g().searchForm,onSubmit:e=>{e.preventDefault(),s(l);let t={...c.query};""===l.trim()?delete t.keyword:t.keyword=l,c.push({pathname:c.pathname,query:t},void 0,{shallow:!0})},children:[(0,r.jsx)("input",{className:g().searchInput,name:"q",value:l,placeholder:"검색할 상품을 입력해주세요",onChange:e=>{a(e.target.value)}}),(0,r.jsx)(n(),{className:g().searchImage,src:"/ic_search.png",alt:"검색 이미지",width:24,height:24})]})}var x=s(9805),w=s(5344),j=s(1664),v=s.n(j);function AllArticles(e){let{initialArticles:t}=e,s=(0,p.useRouter)(),[l,a]=(0,i.useState)(t),[c,o]=(0,i.useState)("recent"),[_,h]=(0,i.useState)("");async function getArticles(e,t){let s=await fetchAllArticles(e,t);a(s)}return((0,i.useEffect)(()=>{let e=s.query.keyword||"";"string"==typeof e&&h(e)},[s.query.keyword]),(0,i.useEffect)(()=>{getArticles(c,_)},[c,_]),Array.isArray(l)&&0!==l.length)?(0,r.jsxs)("div",{className:d().allArticles,children:[(0,r.jsxs)("div",{className:d().allArticlesTitle,children:[(0,r.jsx)("h2",{children:"게시글"}),(0,r.jsx)("div",{className:d().writing,children:"글쓰기"})]}),(0,r.jsxs)("div",{className:d().searchForm,children:[(0,r.jsx)(SearchForm,{onSearch:h}),(0,r.jsx)(components_Dropdown,{options:[{label:"최신순",value:"recent"},{label:"좋아요순",value:"like"}],selectedValue:c,onSelect:e=>{o(e)}})]}),(0,r.jsx)("ul",{className:d().articleList,children:l.map(e=>(0,r.jsx)("li",{className:d().article,children:(0,r.jsxs)(v(),{className:d().articleLink,href:"/boards/".concat(e.id),children:[(0,r.jsxs)("div",{className:d().titleImage,children:[(0,r.jsx)("div",{className:d().title,children:e.title}),(0,r.jsx)(n(),{className:d().image,src:e.image,alt:"게시글 이미지",width:72,height:72})]}),(0,r.jsxs)("div",{className:d().writer,children:[(0,r.jsx)(n(),{src:"/profile.png",alt:"프로필 이미지",width:24,height:24}),(0,r.jsx)("div",{className:d().nickname,children:e.writer.nickname}),(0,r.jsx)("div",{className:d().createdAt,children:(0,x.Z)(e.createdAt)}),(0,r.jsx)(LikeButton,{article:e})]}),(0,r.jsx)("hr",{className:d().lineDivider})]})},e.id))})]}):(0,r.jsx)("div",{className:d().loading,children:(0,r.jsx)(w.Z,{})})}var f=s(4329),N=s.n(f);let getPageSize=()=>{let e=window.innerWidth;switch(!0){case e<768:return 1;case e<1280:return 2;default:return 3}};function BestArticles(){let[e,t]=(0,i.useState)(getPageSize()),[s,l]=(0,i.useState)([]),getBestArticles=async e=>{let t=await fetchBestArticles(e);l(t)};return((0,i.useEffect)(()=>{getBestArticles(e);let handleResize=()=>{t(getPageSize())};return window.addEventListener("resize",handleResize),()=>{window.removeEventListener("resize",handleResize)}},[e]),Array.isArray(s)&&0!==s.length)?(0,r.jsxs)("div",{className:N().bestArticles,children:[(0,r.jsx)("h2",{className:N().bestTitle,children:"베스트 게시글"}),(0,r.jsx)("ul",{className:N().articleList,children:s.map(e=>(0,r.jsx)("li",{className:N().article,children:(0,r.jsxs)(v(),{className:N().articleLink,href:"/boards/".concat(e.id),children:[(0,r.jsxs)("div",{className:N().bestImage,children:[(0,r.jsx)(n(),{src:"/ic_medal.png",alt:"메달 이미지",width:16,height:16}),(0,r.jsx)("p",{children:"Best"})]}),(0,r.jsxs)("div",{className:N().content,children:[(0,r.jsx)("div",{className:N().title,children:e.title}),(0,r.jsx)(n(),{className:N().image,src:e.image,alt:"게시글 이미지",width:72,height:72})]}),(0,r.jsxs)("div",{className:N().writer,children:[(0,r.jsx)("div",{className:N().nickname,children:e.writer.nickname}),(0,r.jsx)(n(),{src:"/ic_heart.png",width:16,height:16,alt:"좋아요 아이콘"}),(0,r.jsxs)("div",{className:N().likeCount,children:[e.likeCount,"+"]}),(0,r.jsx)("div",{className:N().createdAt,children:(0,x.Z)(e.createdAt)})]})]})},e.id))})]}):(0,r.jsx)("div",{className:N().loading,children:(0,r.jsx)(w.Z,{})})}var k=!0;function Boards(e){let{allArticles:t}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(BestArticles,{}),(0,r.jsx)(AllArticles,{initialArticles:t})]})}},9805:function(e,t,s){"use strict";function formatDate(e){let t=new Date(e);return"".concat(t.getFullYear(),". ").concat(t.getMonth()+1,". ").concat(t.getDate())}s.d(t,{Z:function(){return formatDate}})},4636:function(e){e.exports={dropdownToggle:"Dropdown_dropdownToggle__kmWvH",dropdownMenu:"Dropdown_dropdownMenu__dTUh7",sortImage:"Dropdown_sortImage__4o0_U",optionText:"Dropdown_optionText__DKNxq",arrowImage:"Dropdown_arrowImage__BveIr"}},1450:function(e){e.exports={likeButton:"LikeButton_likeButton__i_cNA",likeCount:"LikeButton_likeCount__PVs1J"}},5641:function(e){e.exports={searchForm:"SearchForm_searchForm__OCQwa",searchInput:"SearchForm_searchInput__bWZWa",searchImage:"SearchForm_searchImage__Dx5UF"}},656:function(e){e.exports={spinner:"Spinner_spinner___Bs50",rotate:"Spinner_rotate__1TUb0"}},5588:function(e){e.exports={allArticles:"AllArticles_allArticles__SHBwZ",allArticlesTitle:"AllArticles_allArticlesTitle__eC6at",writing:"AllArticles_writing__TsptF",searchForm:"AllArticles_searchForm__ZpYnu",articleList:"AllArticles_articleList__aFTvD",article:"AllArticles_article__ds5XX",articleLink:"AllArticles_articleLink__vQdMq",titleImage:"AllArticles_titleImage__adXNO",title:"AllArticles_title___pg4o",image:"AllArticles_image__zG7Y6",writer:"AllArticles_writer__fuAjr",nickname:"AllArticles_nickname__jIt_8",createdAt:"AllArticles_createdAt__YYc4k",lineDivider:"AllArticles_lineDivider__95ky9"}},4329:function(e){e.exports={bestArticles:"BestArticles_bestArticles__Cgy6v",bestTitle:"BestArticles_bestTitle__DYNdb",articleList:"BestArticles_articleList__D23JI",article:"BestArticles_article__SXk1j",articleLink:"BestArticles_articleLink__EM6DS",bestImage:"BestArticles_bestImage__gNryO",content:"BestArticles_content__Q5LZp",title:"BestArticles_title__dWg3S",image:"BestArticles_image__f6MOo",writer:"BestArticles_writer__xmRpj",nickname:"BestArticles_nickname__yxlBp",likeCount:"BestArticles_likeCount__FRjwE",createdAt:"BestArticles_createdAt__GL63Y"}}},function(e){e.O(0,[143,774,888,179],function(){return e(e.s=5273)}),_N_E=e.O()}]);